/*! For license information please see jscheduler_ui.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.jscheduler_ui=t():e.jscheduler_ui=t()}(self,(()=>{return e={11:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unsafeStringify=void 0;const s=n(746),r=[];for(let e=0;e<256;++e)r.push((e+256).toString(16).slice(1));function a(e,t=0){return(r[e[t+0]]+r[e[t+1]]+r[e[t+2]]+r[e[t+3]]+"-"+r[e[t+4]]+r[e[t+5]]+"-"+r[e[t+6]]+r[e[t+7]]+"-"+r[e[t+8]]+r[e[t+9]]+"-"+r[e[t+10]]+r[e[t+11]]+r[e[t+12]]+r[e[t+13]]+r[e[t+14]]+r[e[t+15]]).toLowerCase()}t.unsafeStringify=a,t.default=function(e,t=0){const n=a(e,t);if(!(0,s.default)(n))throw TypeError("Stringified UUID is invalid");return n}},48:(e,t,n)=>{const{DateRange:s,format_date:r}=n(120);e.exports={createDragAndDropObserver:function({droppable:e,parentElement:t}){switch(e.type){case"days":return function({parentElement:e}){let t=null,n=null;return{onDrag:function({mouseEvent:s,droppable:r}){t=e.cloneNode(!0),t.style.display="none",t.classList.add("jscheduler_ui-dragged"),document.body.appendChild(t),n=r.getClosestChild(s)},onMove:function({mouseEvent:r,draggable:a,droppable:i}){const o="resize_event"===a.type?n:i.getClosestChild(r),{day:l,minhour:u,maxhour:d}=o.getData(r),h=new s(l+" "+u,l+" "+d),c=a.getCurrentValue(),{start:f,end:g}=c,p=Math.max(h.calcPercentPosition(f)/100,0),y=Math.min(h.calcPercentPosition(g)/100,1)-p,v=o.getRect();t.style.position="absolute",t.style.display="block",t.style.left=v.x+"px",t.style.width=v.width+"px",t.style.height=v.height*y+"px",t.style.top=v.y+v.height*p+"px",t.querySelector(".jscheduler_ui-event-header").innerHTML=c.header,e.style.display="none"},onDrop:function(){document.body.removeChild(t),t=null}}}({parentElement:t});case"timeline":return function({parentElement:e}){let t=null;return{onDrag:function({mouseEvent:n}){t=e.cloneNode(!0),t.style.display="none",t.style["max-height"]="22px",t.classList.add("jscheduler_ui-dragged"),document.body.appendChild(t)},onMove:function({mouseEvent:n,draggable:r,droppable:a}){const i=a.getClosestChild(n),o=i.getData(n),l=new s(o.daterange_start,o.daterange_end),u=r.getCurrentValue(),{start:d,end:h}=new s(u.start,u.start).fill(o.column_daterange_type),c=Math.max(l.calcPercentPosition(d)/100,0),f=Math.min(l.calcPercentPosition(h)/100,1)-c,g=i.getRect();t.style.position="absolute",t.style.display="block",t.style.top=g.y+"px",t.style.width=g.width*f+"px",t.style.left=g.x+g.width*c+"px",t.style["min-width"]="50px",e.style.display="none"},onDrop:function({mouseEvent:e}){document.body.removeChild(t),t=null}}}({parentElement:t})}}}},92:(e,t,n)=>{const{DayView:s,WeekView:r,MonthView:a,YearView:i}=n(623),{Day:o,DateRange:l}=n(120),{createViewRenderer:u}=n(807),{SchedulerListener:d}=n(316),{SchedulerEvent:h}=n(195),c=n(182),{StateHandler:f,reduceEvents:g,reduceCurrentDate:p}=n(350),y=function(e){for(const t of e){const{width:e}=t.contentRect;let n="large";e<=768&&(n="medium"),e<=576&&(n="small"),t.target.setAttribute("data-breakpoint",n)}};e.exports={Scheduler:class{#e;#t;#n;#s={};#r;constructor(e,t={},n={}){this.#e=e,this.#t=new f({},{onUpdate:()=>this.refresh(),reducers:[g,p]}),this.#t.update({viewMode:"week",minHour:8,maxHour:19,currentDate:null,events:[],eventsDraggable:!1,eventsResizeable:!1,eventsClickable:!1,eventsEditable:!1,headersVisible:!0,dateLocale:"en",styles:{"min-height":"480px",height:"100%"},...t}),this.#n=new d({onEventDrop:()=>{},onEventResize:()=>{},onEventClick:()=>{},...n},this.#t),this.#n.register(e),t.useBreakpoint&&(this.#r=new ResizeObserver(y),this.#r.observe(this.#e)),this.#e.classList.add("jscheduler_ui")}refresh(){const e=this.#t.values;e.events=e.events.filter((e=>e.isValid())),"day"===e.viewMode&&(this.#s=new s(e)),"week"===e.viewMode&&(this.#s=new r(e)),"month"===e.viewMode&&(this.#s=new a(e)),"year"===e.viewMode&&(this.#s=new i(e));const t=u(this.#s,e);this.#e.innerHTML=t.render(this.#s)}destroy(){this.#n.unregister(this.#e),this.#r&&this.#r.unobserve(this.#e),this.#e.classList.remove("jscheduler_ui")}setOptions(e){this.#t.update(e)}getOption(e){return this.#t.values[e]}next(){const{currentDate:e,viewMode:t}=this.#t.values;let n=new o(e);"day"===t&&(n=n.addDays(1)),"week"===t&&(n=n.addDays(7)),"month"===t&&(n=n.addMonths(1)),"year"===t&&(n=n.addYears(1)),this.#t.update({currentDate:n.getDate()})}previous(){const{currentDate:e,viewMode:t}=this.#t.values;let n=new o(e);"day"===t&&(n=n.addDays(-1)),"week"===t&&(n=n.addDays(-7)),"month"===t&&(n=n.addMonths(-1)),"year"===t&&(n=n.addYears(-1)),this.#t.update({currentDate:n.getDate()})}today(){this.#t.update({currentDate:Date.now()})}pushEvent(e){const t=e.id?e:{...e,id:c.v4()},{events:n}=this.#t.values;return this.#t.update({events:[...n,t]}),t}replaceEvent(e,t){const{events:n}=this.#t.values;this.#t.update({events:n.map((function(n){return[n.values].find(t)?{...n.values,...e}:n}))})}removeEvent(e){const{events:t}=this.#t.values;this.#t.update({events:t.filter((function(t){return![t.values].find(e)}))})}getEventsDateRange(){return this.#s.eventsDateRange}getLabel(){return this.#s.label}}}},120:e=>{const t={yyyy:e=>String(e.getFullYear()),mm:e=>("0"+(e.getMonth()+1)).slice(-2),dd:e=>("0"+e.getDate()).slice(-2),uuu:e=>String(e.getMilliseconds()).padStart(3,"0"),"yyyy-mm":e=>t.yyyy(e)+"-"+t.mm(e),"yyyy-mm-dd":e=>t["yyyy-mm"](e)+"-"+t.dd(e),hh:e=>("0"+e.getHours()).slice(-2),ii:e=>("0"+e.getMinutes()).slice(-2),ss:e=>("0"+e.getSeconds()).slice(-2),"hh:ii":e=>t.hh(e)+":"+t.ii(e),"hh:ii:ss":e=>t.hh(e)+":"+t.ii(e)+":"+t.ss(e),"hh:ii:ss.uuu":e=>t.hh(e)+":"+t.ii(e)+":"+t.ss(e)+"."+t.uuu(e),"yyyy-mm-dd hh:ii":e=>t["yyyy-mm-dd"](e)+" "+t["hh:ii"](e),"yyyy-mm-dd hh:ii:ss":e=>t["yyyy-mm-dd"](e)+" "+t["hh:ii:ss"](e),"yyyy-mm-dd hh:ii:ss.uuu":e=>t["yyyy-mm-dd"](e)+" "+t["hh:ii:ss.uuu"](e)};function n(e,n){const s=new Date(n);return t[e](s)}class s{constructor(e){this.date=new Date(e)}get vars(){return{year:this.date.getFullYear(),monthIndex:this.date.getMonth(),day:this.date.getDate()}}getFirstDayOfWeek(){const e=new Date(this.date);return e.setDate(e.getDate()-e.getDay()+(0===e.getDay()?-6:1)),new s(e)}getLastDayOfWeek(){const e=new Date(this.date);return e.setDate(e.getDate()-e.getDay()+(0===e.getDay()?0:7)),new s(e)}getFirstDayOfMonth(){const e=new Date(this.date);return e.setDate(1),new s(e)}getLastDayOfMonth(){const e=new Date(this.date);return e.setDate(1),e.setMonth(e.getMonth()+1),e.setDate(e.getDate()-1),new s(e)}addDays(e){const t=new Date(this.date);return t.setDate(this.date.getDate()+e),new s(t)}addMonths(e){const t=new Date(this.date);return t.setMonth(this.date.getMonth()+e),new s(t)}addYears(e){const t=new Date(this.date);return t.setYear(t.getFullYear()+e),new s(t)}getDate(){return this.date}get numday(){return this.date.getDate()}get month(){return this.date.getMonth()}toString(){return t["yyyy-mm-dd"](this.date)}}class r{constructor(e,t){this.start=new Date(e),this.end=new Date(t)}static fromObject({start:e,end:t}){return new r(e,t)}static createForMonth(e){const t=n("yyyy-mm",e)+"-01 00:00:00.000",s=new Date(t);return s.setMonth(s.getMonth()+1),s.setTime(s.getTime()-1),new r(t,s)}get length(){return this.end.getTime()-this.start.getTime()}contains(e){const t=new Date(e.start),n=new Date(e.end);return this.start<=t&&n<=this.end}intersects(e){const t=new Date(e.start),n=new Date(e.end);return n<this.start||this.end<t?null:new r(Math.max(this.start.getTime(),t.getTime()),Math.min(this.end.getTime(),n.getTime()))}calcPercentPosition(e){const t=new Date(e),n=this.end.getTime()-this.start.getTime();return 100*(t.getTime()-this.start.getTime())/n}countDays(){return Math.round(this.length/864e5)}getWeeks(){const e=new s(this.start),t=new s(this.end),n=[];let r=e.getFirstDayOfWeek(),a=t.getLastDayOfWeek();for(;r<=a;){const e=[r];for(let t=1;t<7;t++)e.push(e[0].addDays(t));n.push(e),r=r.addDays(7)}return n}fill(e){if("month"===e){const e=new Date(this.end);return e.setDate(1),e.setMonth(e.getMonth()+1),e.setDate(e.getDate()-1),new r(n("yyyy-mm",this.start)+"-01 00:00:00.000",n("yyyy-mm-dd",e)+" 23:59:59.999")}if("day_hour"===e){const e=new Date(this.start),t=new Date(this.end);return e.setMinutes(0),0==t.getMinutes()&&t.setHours(t.getHours()-1),t.setMinutes(59),new r(n("yyyy-mm-dd hh:ii",e)+":00.000",n("yyyy-mm-dd hh:ii",t)+":59.999")}if("day"===e)return new r(new s(this.start)+" 00:00:00.000",new s(this.end)+" 23:59:59.999")}}function a(e){const t=[],n=new Set;for(const s of e){if(n.has(s))continue;const r=e.filter((e=>e!==s&&s.intersects(e)));if(r.length){const e=a(r);for(const n of e)t.push([s,...n]);for(const e of r)n.add(e)}else t.push([s])}return t}function i(e){const t=new Map,n=e.sort(((e,t)=>t.length-e.length));for(const e of n){let n=1/e.length,s=0;for(const r in e)if(t.has(e[r])){const a=t.get(e[r]);s=a.offset+a.length,n=(1-s)/(e.length-r-1)}else t.set(e[r],{offset:s,length:n}),s+=n}return t}class o{#a;constructor(e){this.#a=e}with(e,t){return"month"===e?new o(n("yyyy-mm",t)+"-"+n("dd",this.#a)+" "+n("hh:ii:ss.uuu",this.#a)):"day"===e?new o(n("yyyy-mm-dd",t)+" "+n("hh:ii:ss.uuu",this.#a)):"day_hour"===e?new o(n("yyyy-mm-dd",t)+" "+n("hh",t)+":"+n("ii",this.#a)+":"+n("ss",this.#a)+"."+n("uuu",this.#a)):void 0}toString(){return n("yyyy-mm-dd hh:ii:ss.uuu",this.#a)}}e.exports={format_date:n,DateRange:r,Day:s,date_add_hour:function(e,t){const n=new Date(e);return n.setTime(n.getTime()+60*t*60*1e3),n},groupDateRangedItemsByPosition:function(e){const t=[];e:for(const n of e){const e=new r(n.start,n.end-1);for(const s in t)if(!t[s].find((t=>{const n=new r(t.start,t.end-1);return e.intersects(n)}))){t[s].push(n);continue e}t.push([n])}return t},getOffsetAndLengthByDateRanges:function(e){return i(a(e))},_groupDateRanges:a,_mapGroupedDateRanges:i,getWeekDays:function({dateLocale:e="en"}={}){const t=[];for(let n=0;n<7;n++){const s=new Date("1970-01-01");s.setDate(n+5),t.push(s.toLocaleString(e,{weekday:"short"}))}return t},DateStringFormatter:o}},182:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version=t.validate=t.v7=t.v6ToV1=t.v6=t.v5=t.v4=t.v3=t.v1ToV6=t.v1=t.stringify=t.parse=t.NIL=t.MAX=void 0;var s=n(196);Object.defineProperty(t,"MAX",{enumerable:!0,get:function(){return s.default}});var r=n(465);Object.defineProperty(t,"NIL",{enumerable:!0,get:function(){return r.default}});var a=n(797);Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return a.default}});var i=n(11);Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return i.default}});var o=n(425);Object.defineProperty(t,"v1",{enumerable:!0,get:function(){return o.default}});var l=n(568);Object.defineProperty(t,"v1ToV6",{enumerable:!0,get:function(){return l.default}});var u=n(591);Object.defineProperty(t,"v3",{enumerable:!0,get:function(){return u.default}});var d=n(286);Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return d.default}});var h=n(557);Object.defineProperty(t,"v5",{enumerable:!0,get:function(){return h.default}});var c=n(356);Object.defineProperty(t,"v6",{enumerable:!0,get:function(){return c.default}});var f=n(268);Object.defineProperty(t,"v6ToV1",{enumerable:!0,get:function(){return f.default}});var g=n(299);Object.defineProperty(t,"v7",{enumerable:!0,get:function(){return g.default}});var p=n(746);Object.defineProperty(t,"validate",{enumerable:!0,get:function(){return p.default}});var y=n(770);Object.defineProperty(t,"version",{enumerable:!0,get:function(){return y.default}})},195:(e,t,n)=>{const{date_add_hour:s,format_date:r}=n(120),a=n(182);class i{#i={};constructor(e){this.#i=e||{},this.#i.id||(this.#i.id=a.v4()),this.init()}init(){const e=new Date(this.#i.start),t=new Date(this.#i.end?this.#i.end:s(e,2));this.#i={bgColor:"#0288d1",color:"white",...this.#i,start:e,end:t}}get values(){return this.#i}get id(){return this.#i.id}get start(){return this.#i.start}get end(){return this.#i.end}get label(){return this.#i.label}get color(){return this.#i.color}get bgColor(){return this.#i.bgColor}get length(){return this.end.getTime()-this.start.getTime()}get header(){return[this.start,this.end].map((e=>r("hh:ii",e))).join(" - ")}cloneWith(e){return new i({...this.values,...e})}isValid(){if(!this.label||!this.start||!this.end)return!1;const e=new Date(this.start),t=new Date(this.end);return!(isNaN(e)||isNaN(t)||t.getTime()<e.getTime())}}e.exports={SchedulerEvent:i,compareSchedulerEventsByDaysCount:function(e,t){const n=864e5,s=Math.round(Math.abs((e.end-e.start)/n));return Math.round(Math.abs((t.end-t.start)/n))-s}}},196:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default="ffffffff-ffff-ffff-ffff-ffffffffffff"},268:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=n(797),r=n(11);t.default=function(e){const t=(n="string"==typeof e?(0,s.default)(e):e,Uint8Array.of((15&n[3])<<4|n[4]>>4&15,(15&n[4])<<4|(240&n[5])>>4,(15&n[5])<<4|15&n[6],n[7],(15&n[1])<<4|(240&n[2])>>4,(15&n[2])<<4|(240&n[3])>>4,16|(240&n[0])>>4,(15&n[0])<<4|(240&n[1])>>4,n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15]));var n;return"string"==typeof e?(0,r.unsafeStringify)(t):t}},271:(e,t,n)=>{const{Rectangle:s,calcDistance:r}=n(420);class a{#e;constructor(e){this.#e=e}getData(e){const t={...this.#e.dataset};if(e){const{x:n,y:s,width:r,height:a}=this.getRect();t.percentX=100*(e.pageX-n)/r,t.percentY=100*(e.pageY-s)/a}return t}getRect(){const{x:e,y:t,width:n,height:s}=this.#e.getBoundingClientRect();return{x:e+window.scrollX,y:t+window.scrollY,width:n,height:s}}}class i{#o;#l;constructor(e,t){this.#o=e,this.#l=t}get type(){return this.#l}getChildren(){this.#o}getData(e){const t=this.getClosestChild(e);return t?t.getData(e):{}}getRect(){const e=[];for(let t of this.#o)e.push(t.getRect());return s.createBounding(e)}getClosestChild(e){const t={x:e.pageX,y:e.pageY},n={},a=[];for(let e of this.#o){const i=new s(e.getRect());if(!i)continue;const o=r(t,i.getCenter());a.push(o),n[o]=e}return n[Math.min(...a)]}}class o{#o;#l;constructor(e,t){this.#o=e,this.#l=t}get type(){return this.#l}getChildren(){this.#o}getData(e){const t=this.getClosestChild(e);return t?t.getData(e):{}}getRect(){const e=[];for(let t of this.#o)e.push(t.getRect());return s.createBounding(e)}getClosestChild(e){e.pageX;const t=e.pageY,n={},r=[];for(let e of this.#o){const a=new s(e.getRect()),i=Math.abs(t-(a.y+a.height/2));r.push(i),n[i]=e}return n[Math.min(...r)]}}e.exports={createDroppable:function({draggableElement:e}){const t=e.getAttribute("data-jscheduler_ui-droppable-target"),n=document.querySelector(t),s=n.getAttribute("data-jscheduler_ui-droppable-type");switch(s){case"days":{const e=[...n.querySelectorAll("td[data-jscheduler_ui-day]")];return new i(e.map((e=>new a(e))),s)}case"timeline":{const e=[...n.querySelectorAll("[data-daterange_start][data-daterange_end]")];return new o(e.map((e=>new a(e))),s)}}}}},284:e=>{e.exports={composeMaps:function(e,t){const n=new Map;for(const[s,r]of e.entries())n.set(s,t.get(r));return n}}},286:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=n(779),r=n(291),a=n(11);t.default=function(e,t,n){if(s.default.randomUUID&&!t&&!e)return s.default.randomUUID();const i=(e=e||{}).random??e.rng?.()??(0,r.default)();if(i.length<16)throw new Error("Random bytes length must be >= 16");if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){if((n=n||0)<0||n+16>t.length)throw new RangeError(`UUID byte range ${n}:${n+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[n+e]=i[e];return t}return(0,a.unsafeStringify)(i)}},291:(e,t)=>{"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0});const s=new Uint8Array(16);t.default=function(){if(!n){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");n=crypto.getRandomValues.bind(crypto)}return n(s)}},299:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateV7State=void 0;const s=n(291),r=n(11),a={};function i(e,t,n){return e.msecs??=-1/0,e.seq??=0,t>e.msecs?(e.seq=n[6]<<23|n[7]<<16|n[8]<<8|n[9],e.msecs=t):(e.seq=e.seq+1|0,0===e.seq&&e.msecs++),e}function o(e,t,n,s,r=0){if(e.length<16)throw new Error("Random bytes length must be >= 16");if(s){if(r<0||r+16>s.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`)}else s=new Uint8Array(16),r=0;return t??=Date.now(),n??=127*e[6]<<24|e[7]<<16|e[8]<<8|e[9],s[r++]=t/1099511627776&255,s[r++]=t/4294967296&255,s[r++]=t/16777216&255,s[r++]=t/65536&255,s[r++]=t/256&255,s[r++]=255&t,s[r++]=112|n>>>28&15,s[r++]=n>>>20&255,s[r++]=128|n>>>14&63,s[r++]=n>>>6&255,s[r++]=n<<2&255|3&e[10],s[r++]=e[11],s[r++]=e[12],s[r++]=e[13],s[r++]=e[14],s[r++]=e[15],s}t.updateV7State=i,t.default=function(e,t,n){let l;if(e)l=o(e.random??e.rng?.()??(0,s.default)(),e.msecs,e.seq,t,n);else{const e=Date.now(),r=(0,s.default)();i(a,e,r),l=o(r,a.msecs,a.seq,t,n)}return t??(0,r.unsafeStringify)(l)}},316:(e,t,n)=>{const{createDragAndDropObserver:s}=n(48),{createDroppable:r}=n(271),{createDraggable:a}=n(903);e.exports={SchedulerListener:function(e,t){const{onEventDrop:n,onEventResize:i,onEventClick:o,onEventEdit:l}=e;function u(){const{events:e}=t.values;return e}function d(e){const{events:n}=t.values;t.update({events:n.map((t=>t.id!==e.id?t:e))})}function h(e){if(g(e,".jscheduler_ui-event-edit")){e.preventDefault();const t=e.target.closest(".jscheduler_ui-event"),n=u().find((function({id:e}){return t.dataset.eventId===String(e)}));n&&l(n)}else if(g(e,".jscheduler_ui-event a")){e.preventDefault();const t=e.target.closest(".jscheduler_ui-event"),n=u().find((function({id:e}){return t.dataset.eventId===String(e)}));n&&o(n)}}function c(e){if(g(e,".jscheduler_ui-event .jscheduler_ui-resize-handler")){e.preventDefault();const t=e.target.closest(".jscheduler_ui-event"),n=u().find((function({id:e}){return t.dataset.eventId===String(e)})),o=r({draggableElement:t}),l=a("resize_event",{onChange:function(e,t){d(e),i(e,t)},schedulerEvent:n}),h=s({droppable:o,parentElement:t});l.startDragAndDrop({mouseEvent:e,observer:h,droppable:o})}}function f(e){if(g(e,".jscheduler_ui-event .jscheduler_ui-draggable")){e.preventDefault();const t=e.target.closest(".jscheduler_ui-event"),i=u().find((function({id:e}){return t.dataset.eventId===String(e)})),o=r({draggableElement:t}),l=a(t.matches(".jscheduler_ui-event-timeline")?"move_event_timeline":"move_event_day",{onChange:function(e,t){d(e),n(e,t)},schedulerEvent:i}),h=s({droppable:o,parentElement:t});l.startDragAndDrop({mouseEvent:e,observer:h,droppable:o})}}function g(e,t){for(const n of e.composedPath())if(n instanceof Element&&n.matches(t))return!0}this.register=function(e){e.addEventListener("click",h),e.addEventListener("mousedown",c),e.addEventListener("mousedown",f)},this.unregister=function(e){e.removeEventListener("click",h),e.removeEventListener("mousedown",c),e.removeEventListener("mousedown",f)}}}},338:(e,t)=>{"use strict";function n(e){return 14+(e+64>>>9<<4)+1}function s(e,t){const n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function r(e,t,n,r,a,i){return s((o=s(s(t,e),s(r,i)))<<(l=a)|o>>>32-l,n);var o,l}function a(e,t,n,s,a,i,o){return r(t&n|~t&s,e,t,a,i,o)}function i(e,t,n,s,a,i,o){return r(t&s|n&~s,e,t,a,i,o)}function o(e,t,n,s,a,i,o){return r(t^n^s,e,t,a,i,o)}function l(e,t,n,s,a,i,o){return r(n^(t|~s),e,t,a,i,o)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(e){const t=new Uint8Array(4*e.length);for(let n=0;n<4*e.length;n++)t[n]=e[n>>2]>>>n%4*8&255;return t}(function(e,t){const r=new Uint32Array(n(t)).fill(0);r.set(e),r[t>>5]|=128<<t%32,r[r.length-1]=t,e=r;let u=1732584193,d=-271733879,h=-1732584194,c=271733878;for(let t=0;t<e.length;t+=16){const n=u,r=d,f=h,g=c;u=a(u,d,h,c,e[t],7,-680876936),c=a(c,u,d,h,e[t+1],12,-389564586),h=a(h,c,u,d,e[t+2],17,606105819),d=a(d,h,c,u,e[t+3],22,-1044525330),u=a(u,d,h,c,e[t+4],7,-176418897),c=a(c,u,d,h,e[t+5],12,1200080426),h=a(h,c,u,d,e[t+6],17,-1473231341),d=a(d,h,c,u,e[t+7],22,-45705983),u=a(u,d,h,c,e[t+8],7,1770035416),c=a(c,u,d,h,e[t+9],12,-1958414417),h=a(h,c,u,d,e[t+10],17,-42063),d=a(d,h,c,u,e[t+11],22,-1990404162),u=a(u,d,h,c,e[t+12],7,1804603682),c=a(c,u,d,h,e[t+13],12,-40341101),h=a(h,c,u,d,e[t+14],17,-1502002290),d=a(d,h,c,u,e[t+15],22,1236535329),u=i(u,d,h,c,e[t+1],5,-165796510),c=i(c,u,d,h,e[t+6],9,-1069501632),h=i(h,c,u,d,e[t+11],14,643717713),d=i(d,h,c,u,e[t],20,-373897302),u=i(u,d,h,c,e[t+5],5,-701558691),c=i(c,u,d,h,e[t+10],9,38016083),h=i(h,c,u,d,e[t+15],14,-660478335),d=i(d,h,c,u,e[t+4],20,-405537848),u=i(u,d,h,c,e[t+9],5,568446438),c=i(c,u,d,h,e[t+14],9,-1019803690),h=i(h,c,u,d,e[t+3],14,-187363961),d=i(d,h,c,u,e[t+8],20,1163531501),u=i(u,d,h,c,e[t+13],5,-1444681467),c=i(c,u,d,h,e[t+2],9,-51403784),h=i(h,c,u,d,e[t+7],14,1735328473),d=i(d,h,c,u,e[t+12],20,-1926607734),u=o(u,d,h,c,e[t+5],4,-378558),c=o(c,u,d,h,e[t+8],11,-2022574463),h=o(h,c,u,d,e[t+11],16,1839030562),d=o(d,h,c,u,e[t+14],23,-35309556),u=o(u,d,h,c,e[t+1],4,-1530992060),c=o(c,u,d,h,e[t+4],11,1272893353),h=o(h,c,u,d,e[t+7],16,-155497632),d=o(d,h,c,u,e[t+10],23,-1094730640),u=o(u,d,h,c,e[t+13],4,681279174),c=o(c,u,d,h,e[t],11,-358537222),h=o(h,c,u,d,e[t+3],16,-722521979),d=o(d,h,c,u,e[t+6],23,76029189),u=o(u,d,h,c,e[t+9],4,-640364487),c=o(c,u,d,h,e[t+12],11,-421815835),h=o(h,c,u,d,e[t+15],16,530742520),d=o(d,h,c,u,e[t+2],23,-995338651),u=l(u,d,h,c,e[t],6,-198630844),c=l(c,u,d,h,e[t+7],10,1126891415),h=l(h,c,u,d,e[t+14],15,-1416354905),d=l(d,h,c,u,e[t+5],21,-57434055),u=l(u,d,h,c,e[t+12],6,1700485571),c=l(c,u,d,h,e[t+3],10,-1894986606),h=l(h,c,u,d,e[t+10],15,-1051523),d=l(d,h,c,u,e[t+1],21,-2054922799),u=l(u,d,h,c,e[t+8],6,1873313359),c=l(c,u,d,h,e[t+15],10,-30611744),h=l(h,c,u,d,e[t+6],15,-1560198380),d=l(d,h,c,u,e[t+13],21,1309151649),u=l(u,d,h,c,e[t+4],6,-145523070),c=l(c,u,d,h,e[t+11],10,-1120210379),h=l(h,c,u,d,e[t+2],15,718787259),d=l(d,h,c,u,e[t+9],21,-343485551),u=s(u,n),d=s(d,r),h=s(h,f),c=s(c,g)}return Uint32Array.of(u,d,h,c)}(function(e){if(0===e.length)return new Uint32Array;const t=new Uint32Array(n(8*e.length)).fill(0);for(let n=0;n<e.length;n++)t[n>>2]|=(255&e[n])<<n%4*8;return t}(e),8*e.length))}},350:(e,t,n)=>{const{SchedulerEvent:s}=n(195);e.exports={StateHandler:class{#i;#u;#d;constructor(e,t={}){this.#i={...e},this.#u=t.onUpdate||(()=>{}),this.#d=t.reducers||[]}get values(){return this.#i}update(e){const t=this.#d.reduce(((e,t)=>({...e,...t(e)})),e);this.#i={...this.#i,...t},this.#u(this)}},reduceEvents:function(e){return"events"in e?{events:e.events.map((e=>e instanceof s?e:new s(e)))}:{}},reduceCurrentDate:function(e){if("currentDate"in e){if(e.currentDate)return{};const{events:t}=e;if(t){const e=t.map((e=>new Date(e.start))).filter((e=>!isNaN(e)));if(e.length)return{currentDate:Math.min(...e.map((e=>e.getTime())))}}return{currentDate:Date.now()}}return{}}}},356:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=n(11),r=n(425),a=n(568);t.default=function(e,t,n){e??={},n??=0;let i=(0,r.default)({...e,_v6:!0},new Uint8Array(16));if(i=(0,a.default)(i),t){for(let e=0;e<16;e++)t[n+e]=i[e];return t}return(0,s.unsafeStringify)(i)}},420:e=>{class t{x;y;width;height;constructor({x:e,y:t,width:n,height:s}){this.x=e,this.y=t,this.width=n,this.height=s}get top(){return this.y}get right(){return this.x+this.width}get bottom(){return this.y+this.height}contains(e){return this.x<=e.x&&this.y<=e.y&&e.x+e.width<=this.x+this.width&&e.y+e.height<=this.y+this.height}includes(e){return this.x<=e.x&&this.y<=e.y&&e.x<=this.x+this.width&&e.y<=this.y+this.height}getCenter(){return{x:this.x+this.width/2,y:this.y+this.height/2}}intersectsWith(e){return!(e.x>this.x+this.width||e.x+e.width<this.x||e.y>this.y+this.height||e.y+e.height<this.y)}static createBounding(e){const n=Math.min(...e.map((e=>e.x))),s=Math.min(...e.map((e=>e.y))),r=Math.max(...e.map((e=>e.x+e.width))),a=Math.max(...e.map((e=>e.y+e.height)));return new t({x:n,y:s,width:r-n,height:a-s})}}e.exports={Rectangle:t,calcDistance:function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}}},425:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateV1State=void 0;const s=n(291),r=n(11),a={};function i(e,t,n){return e.msecs??=-1/0,e.nsecs??=0,t===e.msecs?(e.nsecs++,e.nsecs>=1e4&&(e.node=void 0,e.nsecs=0)):t>e.msecs?e.nsecs=0:t<e.msecs&&(e.node=void 0),e.node||(e.node=n.slice(10,16),e.node[0]|=1,e.clockseq=16383&(n[8]<<8|n[9])),e.msecs=t,e}function o(e,t,n,s,r,a,i=0){if(e.length<16)throw new Error("Random bytes length must be >= 16");if(a){if(i<0||i+16>a.length)throw new RangeError(`UUID byte range ${i}:${i+15} is out of buffer bounds`)}else a=new Uint8Array(16),i=0;t??=Date.now(),n??=0,s??=16383&(e[8]<<8|e[9]),r??=e.slice(10,16);const o=(1e4*(268435455&(t+=122192928e5))+n)%4294967296;a[i++]=o>>>24&255,a[i++]=o>>>16&255,a[i++]=o>>>8&255,a[i++]=255&o;const l=t/4294967296*1e4&268435455;a[i++]=l>>>8&255,a[i++]=255&l,a[i++]=l>>>24&15|16,a[i++]=l>>>16&255,a[i++]=s>>>8|128,a[i++]=255&s;for(let e=0;e<6;++e)a[i++]=r[e];return a}t.updateV1State=i,t.default=function(e,t,n){let l;const u=e?._v6??!1;if(e){const t=Object.keys(e);1===t.length&&"_v6"===t[0]&&(e=void 0)}if(e)l=o(e.random??e.rng?.()??(0,s.default)(),e.msecs,e.nsecs,e.clockseq,e.node,t,n);else{const e=Date.now(),r=(0,s.default)();i(a,e,r),l=o(r,a.msecs,a.nsecs,u?void 0:a.clockseq,u?void 0:a.node,t,n)}return t??(0,r.unsafeStringify)(l)}},465:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default="00000000-0000-0000-0000-000000000000"},466:(e,t,n)=>{const{Scheduler:s}=n(92),{format_date:r,Day:a}=n(120),i={format_date:r,Day:a};e.exports={render:function(e,t){const n=Array.isArray(t)?{events:t}:t,r={},a={};for(const[e,t]of Object.entries(n))e.startsWith("on")?a[e]=t:r[e]=t;return new s(e,r,a)},utils:i,name:"@mormat/jscheduler_ui",version:"0.9.5"}},557:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.URL=t.DNS=void 0;const s=n(829),r=n(988);var a=n(988);function i(e,t,n,a){return(0,r.default)(80,s.default,e,t,n,a)}Object.defineProperty(t,"DNS",{enumerable:!0,get:function(){return a.DNS}}),Object.defineProperty(t,"URL",{enumerable:!0,get:function(){return a.URL}}),i.DNS=r.DNS,i.URL=r.URL,t.default=i},568:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=n(797),r=n(11);t.default=function(e){const t=(n="string"==typeof e?(0,s.default)(e):e,Uint8Array.of((15&n[6])<<4|n[7]>>4&15,(15&n[7])<<4|(240&n[4])>>4,(15&n[4])<<4|(240&n[5])>>4,(15&n[5])<<4|(240&n[0])>>4,(15&n[0])<<4|(240&n[1])>>4,(15&n[1])<<4|(240&n[2])>>4,96|15&n[2],n[3],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15]));var n;return"string"==typeof e?(0,r.unsafeStringify)(t):t}},591:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.URL=t.DNS=void 0;const s=n(338),r=n(988);var a=n(988);function i(e,t,n,a){return(0,r.default)(48,s.default,e,t,n,a)}Object.defineProperty(t,"DNS",{enumerable:!0,get:function(){return a.DNS}}),Object.defineProperty(t,"URL",{enumerable:!0,get:function(){return a.URL}}),i.DNS=r.DNS,i.URL=r.URL,t.default=i},623:(e,t,n)=>{const{Day:s,DateRange:r,format_date:a,getWeekDays:i}=n(120);class o{#h;#c;#f;#g;#p;#y;constructor({eventsDateRange:e,minHour:t,maxHour:n,dateLocale:s,events:r,groups:a=[]}){this.#h=e,this.#c=t,this.#f=n,this.#g=s,this.#p=r,this.#y=a}get eventsDateRange(){return this.#h}get minHour(){return Math.max(0,this.#c)}get maxHour(){return this.#f}get dateLocale(){return this.#g}get hours(){const e=Math.max(0,this.#c),t=Math.min(23,this.#f);return t<e?[]:[...Array(t-e+1)].map(((t,n)=>n+e))}get days(){const e=new s(this.#h.end),t=[new s(this.#h.start)];for(;t.at(-1)<e;)t.push(t.at(-1).addDays(1));return t}get vars(){const{eventsDateRange:e,minHour:t,maxHour:n}=this,s=this.#p.filter((t=>e.intersects(t))),a=this.hours.map((e=>({label:String(e).padStart(2,"0")+":00",value:e}))),i=this.days.map((e=>{const t=new r(e+` ${this.#c}:00:00`,e+` ${this.#f+1}:00:00`),n=new Date(e).toLocaleString(this.#g,{weekday:"short",month:"short",day:"numeric"});return{value:e,events:s.filter((e=>t.contains(e))),label:n,dateRange:t}})),o=s.filter((function(e){return-1===i.findIndex((t=>t.events.includes(e)))}));return{hours:a,days:i,spannedEvents:o,minHour:t,maxHour:n,eventsDateRange:e,groups:this.#y}}}e.exports={DayView:class extends o{constructor({currentDate:e,...t}){const n=new s(e||Date.now());super({eventsDateRange:new r(n+" 00:00:00",n+" 23:59:59.999"),...t})}get label(){const{start:e}=this.eventsDateRange;return e.toLocaleString(this.dateLocale,{weekday:"long",month:"long",day:"numeric",year:"numeric"})}},WeekView:class extends o{constructor({currentDate:e,...t}){const n=new s(e||Date.now()).getFirstDayOfWeek(),a=n.addDays(6);super({eventsDateRange:new r(n+" 00:00:00",a+" 23:59:59.999"),...t})}get label(){const{start:e,end:t}=this.eventsDateRange;return e.toLocaleString(this.dateLocale,{month:"short",day:"numeric",year:"numeric"})+" - "+t.toLocaleString(this.dateLocale,{month:"short",day:"numeric",year:"numeric"})}},MonthView:class{#v;#g;#p;#y;constructor({currentDate:e,dateLocale:t,events:n,groups:s}){this.#v=e,this.#g=t,this.#p=n,this.#y=s}get eventsDateRange(){const e=new s(this.#v),t=e.getFirstDayOfMonth().getFirstDayOfWeek(),n=e.getLastDayOfMonth().getLastDayOfWeek();return new r(t+" 00:00:00",n+" 23:59:59.999")}get label(){return new Date(this.#v).toLocaleString(this.#g,{month:"long",year:"numeric"})}get weeks(){const e=this.eventsDateRange,t=[];let n=new s(e.start),r=new s(e.end);for(;n<=r;){const e=[n];for(let t=1;t<7;t++)e.push(e[0].addDays(t));t.push(e),n=n.addDays(7)}return t}get vars(){const e=new s(this.#v),t=this.weeks.map((t=>{const n=new r(t.at(0)+" 00:00:00",t.at(-1)+" 23:59:59.999"),s=this.#p.filter((e=>n.intersects(e)));return{days:t.map((t=>({numday:t.numday,value:t,isCurrentMonth:t.month===e.month}))),dateRange:n,events:s}}));return{weekdays:t[0].days.map((({value:e})=>e.date.toLocaleString(this.#g,{weekday:"short"}))),weeks:t,groups:this.#y}}},YearView:class{#v;#g;#p;#y;constructor({currentDate:e,dateLocale:t,events:n,groups:s=[]}){this.#v=e,this.#g=t,this.#p=n,this.#y=s}get label(){return a("yyyy",this.#v)}get eventsDateRange(){const e=a("yyyy",this.#v);return new r(e+"-01-01 00:00:00.000",e+"-12-31 23:59:59.999")}get vars(){const e=[],t=[];for(let e=1;e<=12;e++){const n=r.createForMonth(a("yyyy",this.#v)+"-"+e+"-01");let s=n.start.toLocaleString(this.#g,{month:"long"});s=s[0].toUpperCase()+s.substring(1);const i=n.getWeeks(),o=[];for(let e=1;e<=n.countDays();e++){const t=a("yyyy-mm",n.start)+"-"+e,s=new Date(t),r=[0,6].includes(s.getDay());o.push({day_of_month:e,is_dayoff:r})}const l=n.start.getDay()||7,u=this.#p.filter((e=>n.intersects(e)));t.push({text:s,dateRange:n,weeks:i,monthdays:o,startDay:l,events:u})}const n=Math.max(...t.map((e=>e.weeks.length)));for(let s=1;s<=n;s++){let r=i({dateLocale:this.#g});if(s===n){const e=Math.max(...t.filter((e=>e.weeks.length===n)).map((e=>e.dateRange.end.getDay()||7)));r=r.filter(((t,n)=>n<e))}e.push(...r.map((function(e,t){return{text:e.substring(0,1).toUpperCase(),numday_in_week:t+1}})))}return{days:e,months:t,groups:this.#y}}}}},697:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i},746:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=n(697);t.default=function(e){return"string"==typeof e&&s.default.test(e)}},770:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=n(746);t.default=function(e){if(!(0,s.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}},779:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n="undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);t.default={randomUUID:n}},797:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=n(746);t.default=function(e){if(!(0,s.default)(e))throw TypeError("Invalid UUID");let t;return Uint8Array.of((t=parseInt(e.slice(0,8),16))>>>24,t>>>16&255,t>>>8&255,255&t,(t=parseInt(e.slice(9,13),16))>>>8,255&t,(t=parseInt(e.slice(14,18),16))>>>8,255&t,(t=parseInt(e.slice(19,23),16))>>>8,255&t,(t=parseInt(e.slice(24,36),16))/1099511627776&255,t/4294967296&255,t>>>24&255,t>>>16&255,t>>>8&255,255&t)}},807:(e,t,n)=>{const{Day:s,format_date:r,DateRange:a}=n(120),{groupDateRangedItemsByPosition:i}=n(120),{getOffsetAndLengthByDateRanges:o}=n(120),{composeMaps:l}=n(284),{compareSchedulerEventsByDaysCount:u}=n(195),d=n(965),{DayView:h,WeekView:c,MonthView:f,YearView:g}=n(623),p={events_row:'<div data-daterange_start = "{{ dateRange.start }}" data-daterange_end = "{{ dateRange.end }}" style = "width: 100%; height: {{ style.height }}; position: relative " {{# attrs }}{{key}}="{{value}}" {{/ attrs }} > {{# for_each_events }} <div class = "jscheduler_ui-event jscheduler_ui-event-timeline {{ className }}" style = " position: absolute; top: {{ style.top }}; left: {{ style.left }}; right: {{ style.right }}; height: {{ style.height }}; color: {{ style.color }}; background-color: {{ style.backgroundColor }} " data-event-id = "{{ event.id }}" data-jscheduler_ui-droppable-target = "{{ eventDroppableTarget }}" > {{# if_draggable }} <div class="jscheduler_ui-draggable" style=" position: absolute; top: 0; left: 0; right: 0; bottom: 0; z-index: 1 " > </div> {{/ if_draggable }} {{# if_clickable }} <span style="position: relative; z-index: 2"> <a href="#" style="color: {{ event.color }}"> {{ description }} </a> </span> {{/ if_clickable }} {{^ if_clickable }} <span style="color: {{ event.color }}"> {{ description }} </span> {{/ if_clickable }} {{# if_editable }} <a class="jscheduler_ui-event-edit" href="#" title = "{{ translations.edit_event_btn }}" > <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-plus"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg> </a> {{/ if_editable }} </div> {{/ for_each_events }} </div>',events_column:' {{# for_each_events }} <div class="jscheduler_ui-event jscheduler_ui-event-day {{ className }}" style="position: absolute; top: {{ style.top }}; bottom: {{ style.bottom }}; left: {{ style.left }}; width: {{ style.width }}; background-color: {{ style.backgroundColor }} " data-event-id="{{event.id}}" data-jscheduler_ui-droppable-target="{{eventDroppableTarget}}" > {{# if_draggable }} <div class="jscheduler_ui-draggable" style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; z-index: 1" > </div> {{/ if_draggable }} {{# if_resizeable }} <div class="jscheduler_ui-resize-handler" style="position: absolute; left: 0; right: 0; bottom: 0; height: 10px; z-index: 2" > </div> {{/ if_resizeable }} {{# if_clickable }} <span style="position: relative; color: {{ event.color }}; z-index: 3;" > <a class="jscheduler_ui-event-header" href="#"> {{ event.header }} </a> <br/> <a href="#"> {{ event.label }} </a> </span> {{/ if_clickable }} {{^ if_clickable }} <span style="color: {{ event.color }}"> <span class="jscheduler_ui-event-header"> {{ event.header }} </span> <br/> {{ event.label }} </span> {{/ if_clickable }} {{# if_editable }} <a class = "jscheduler_ui-event-edit" href = "#" title = "{{ translations.edit_event_btn }}" > <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-plus"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg> </a> {{/ if_editable }} </div> {{/ for_each_events }} ',grid:'<div class="jscheduler_ui-grid"> {{ #hseps }} <div class="jscheduler_ui-hsep" style="position: absolute; left: {{ style.left }}; top: 0; height: 100%; width: 1px; " > </div> {{ /hseps }} {{#vseps}} <div class="jscheduler_ui-vsep" style="position: absolute; top: {{ style.top }}; left: 0; width: 100%; height: 1px;" > </div> {{/vseps}} </div>'};class y{#m;#w;#b;#_;#D;constructor({eventsClickable:e,eventsResizeable:t,eventsDraggable:n,eventsEditable:s,translations:r={}}){this.#m=e,this.#w=n,this.#b=t,this.#_=s,this.#D={edit_event_btn:"Edit the event",...r}}getTranslations(){return this.#D}withEventsColumnPartial({events:e,dateRange:t,eventDroppableTarget:n}){const s=i(e.filter((e=>t.contains(e))));return{for_each_events:s.map(((e,r)=>e.map((e=>{const a={position:"absolute",top:D(t.calcPercentPosition(e.start),2)+"%",bottom:D(100-t.calcPercentPosition(e.end),2)+"%",left:100*r/s.length+"%",width:100/s.length+"%"};let i="";return x.includes(e.bgColor)?i="bg-"+e.bgColor:a.backgroundColor=e.bgColor,{if_draggable:this.#w,if_resizeable:this.#b,if_clickable:this.#m,if_editable:this.#_,event:e,eventDroppableTarget:n,style:a,className:i}})))).flat()}}withEventsRowPartial({events:e,dateRange:t,eventDroppableTarget:n,columnDateRangeType:s="day",groupId:i,labelType:d}){const h=[...e].sort(u),c=new Map(h.map((e=>[e,a.fromObject(e).fill(s)]))),f=l(c,o([...c.values()])),g={"data-column_daterange_type":s};return void 0!==i&&(g["data-group_id"]=i),{for_each_events:e.map((e=>{const r=t.intersects(e);if(!r)return null;const{start:a,end:i}=r.fill(s),o={top:100*f.get(e).offset+"%",height:100*f.get(e).length+"%",left:t.calcPercentPosition(a)+"%",right:100-t.calcPercentPosition(i)+"%"};let l="";x.includes(e.bgColor)?l="bg-"+e.bgColor:o.backgroundColor=e.bgColor;let u=e.label;if(d){const{labels:t={}}=e.values;t[d]&&(u=t[d])}return{if_draggable:this.#w,if_clickable:this.#m,if_editable:this.#_,event:e,eventDroppableTarget:n,style:o,className:l,description:u}})).filter((e=>e)),dateRange:{start:r("yyyy-mm-dd hh:ii:ss",t.start),end:r("yyyy-mm-dd hh:ii:ss",t.end)},style:{height:"100%"},attr:g,attrs:Object.entries(g).map((function([e,t]){return{key:e,value:t}}))}}withGridPartial({cols:e=1,rows:t=1}){return{hseps:[...Array(e-1)].map(((t,n)=>({style:{left:100*(n+1)/e+"%"}}))),vseps:[...Array(t-1)].map(((e,n)=>({style:{top:100*(n+1)/t+"%"}})))}}}class v extends y{render(e){const t={...e.vars};t.translations=this.getTranslations(),t.headerId="jscheduler_ui-"+_(),t.bodyId="jscheduler_ui-"+_(),t.has_header=t.days.length>1;for(const e of t.hours)e.style={width:"5%"};for(const n of t.days)n.style={width:D(95/t.days.length,2)+"%"},n.rowspan=t.hours.length,n.data={day:n.value,minhour:`${e.minHour}:00:00`,maxhour:`${e.maxHour+1}:00:00`},n.events_column=this.withEventsColumnPartial({events:n.events,dateRange:n.dateRange,eventDroppableTarget:"#"+t.bodyId}),n.is_dayoff=[0,6].includes(n.value.date.getDay());if(t.hours.length&&(t.hours[0]._days=t.days,t.hours[0].grid=this.withGridPartial({rows:e.hours.length}),t["hours[0]"]=t.hours[0]),t.spannedEvents.length){const e=new Map(t.spannedEvents.map((e=>[e,new a(e.start,e.end)]))),n=l(e,o([...e.values()])),s=Math.min(...[...n.values()].map((e=>e.length)));t.events_row={...this.withEventsRowPartial({events:t.spannedEvents,dateRange:t.eventsDateRange,eventDroppableTarget:"#"+t.headerId}),colspan:t.days.length},t.events_row_height=22/s+"px"}return d.render('<table id="{{headerId}}" class="jscheduler_ui-day_view-header jscheduler_ui-daterange" style="width: 100%; table-layout: fixed; flex: 0 1 auto;" data-jscheduler_ui-droppable-type="timeline" > {{# has_header }} <thead> <tr> <td style="width: {{ hours[0].style.width }}"> </td> {{# days }} <th style="width: {{ style.width }}; text-align: center" class="jscheduler_ui-daterange-header jscheduler_ui-day-header" > {{ label }} </th> {{/ days }} </tr> </thead> {{/ has_header }} {{# events_row }} <tbody> <tr> <td style="width: {{ hours[0].style.width }}"></td> <td class="jscheduler_ui-daterange-row" colspan="{{ colspan }}" style="height: {{ events_row_height }}" > {{> events_row }} </td> </tr> </tbody> {{/ events_row }} </table> <table id="{{bodyId}}" class="jscheduler_ui-day_view-body" style="width: 100%; table-layout: fixed; flex: 1 1 auto;" data-jscheduler_ui-droppable-type="days" > <tbody style="position: relative"> {{# hours }} <tr> <th style="width: {{ style.width }}" data-hour> {{ label }} {{ #grid }} {{> grid }} {{ /grid }} </div> </th> {{# _days }} <td style = "width: {{ style.width }}%; position: relative" rowspan = "{{ rowspan }}" data-jscheduler_ui-day = "{{ data.day }}" data-day = "{{ data.day }}" data-minhour = "{{ data.minhour }}" data-maxhour = "{{ data.maxhour }}" > {{# is_dayoff }} <div class="jscheduler_ui-dayoff" style="position: absolute; top: 0; left: 0; bottom: 0; right: 0; " > </div> {{/ is_dayoff }} {{# events_column }} {{> events_column }} {{/ events_column }} </td> {{/ _days }} </tr> {{/ hours }} </tbody> </table> ',t,p)}}class m extends y{render(e){const t={...e.vars};t.translations=this.getTranslations(),t.bodyId="jscheduler_ui-"+_();for(const n of t.weeks){n.events_row=this.withEventsRowPartial({eventDroppableTarget:"#"+t.bodyId,dateRange:n.dateRange,events:n.events}),n.style={height:100/e.weeks.length+"%"},n.grid=this.withGridPartial({cols:7});for(const e in n.days){const t=n.days[e];t.style={width:100/7+"%",left:100*e/7+"%"},t.active=function(){return t.isCurrentMonth?"active":"inactive"}}n.daysoff=n.days.map(((e,t)=>{const{date:n}=e.value;return{date:n,style:{width:100/7+"%",left:100*t/7+"%"}}})).filter((e=>[0,6].includes(e.date.getDay())))}return d.render(' <table class="jscheduler_ui-month_view" style="width: 100%; table-layout: fixed; flex: 1 1 auto;" > <thead> <tr> {{ #weekdays }} <th style="width: 14.28%"> {{ . }} </th> {{ /weekdays }} </tr> </thead> <tbody id="{{bodyId}}" data-jscheduler_ui-droppable-type="timeline" > {{ #weeks }} <tr> <td colspan="7" style="position: relative; height: {{ style.height }}; " class="jscheduler_ui-daterange" > {{ #grid }} {{> grid }} {{ /grid }} {{ #daysoff }} <div class="jscheduler_ui-dayoff" style = "position: absolute; top: 0; left: {{ style.left }}; width: {{ style.width }}; bottom: 0; " > </div> {{ /daysoff }} <div> {{ #days }} <span style="width: {{ style.width }}; left: {{ style.left }}; top: 0; position: absolute; text-align: right; " class="jscheduler_ui-month_view-numday jscheduler_ui-month_view-numday-{{ active }} jscheduler_ui-daterange-header " >{{ numday }}</span> {{ /days }} </div> {{ #events_row }} <div class="jscheduler_ui-daterange-row" style=" position: absolute; top: 0; bottom: 0; left: 0; right: 0; padding-top: 20px; " > {{> events_row }} </div> {{ /events_row }} </td> </tr> {{ /weeks }} </tbody> </table> ',t,p)}}class w extends y{render(e){const t={...e.vars};t.bodyId="jscheduler_ui-"+_(),t.row_colspan=t.days.length;for(const e of t.days)e.style={width:92/t.days.length+"%"};t.yaxis={style:{width:"8%"}};for(const e of t.months){e.grid=this.withGridPartial({cols:t.days.length});for(const t in e.monthdays)e.monthdays[t].width=100/e.monthdays.length+"%",e.monthdays[t].left=100*t/e.monthdays.length+"%";const{startDay:n}=e;e.style={left:100*(n-1)/t.days.length+"%",width:100*e.dateRange.countDays()/t.days.length+"%"},e.events_row=this.withEventsRowPartial({eventDroppableTarget:"#"+t.bodyId,dateRange:e.dateRange,events:e.events.map((function({values:e}){let{label:t,short_label:n}=e;return n&&new a(e.start,e.end).countDays()<=1&&(t=n),{...e,label:t}}))})}return d.render('<table class="jscheduler_ui-year_view" style="width: 100%; table-layout: fixed; flex: 1 1 auto;" > <thead> <tr> <td style="width: {{ yaxis.style.width }}"> </td> {{ #days }} <th style = "width: {{ style.width }}; overflow: hidden; text-align: center " > {{ text }} </th> {{ /days }} </tr> </thead> <tbody id="{{bodyId}}" data-jscheduler_ui-droppable-type="timeline" > {{ #months }} <tr> <th> {{ text }} </th> <td colspan="{{ row_colspan }}" style="position: relative; " > <div style="position: absolute; top: 0; bottom: 0; left: {{ style.left }}; width: {{ style.width }}; background-color: white; " > {{ #monthdays }} {{ #is_dayoff }} <div class="jscheduler_ui-dayoff" style="position: absolute; top: 0; bottom: 0; left: {{ left }}; width: {{ width }}; " > </div> {{ /is_dayoff }} <span class="jscheduler_ui-year_view-monthday" style="position: absolute; top: 0; left: {{ left }}; width: {{ width }}; " data-monthday="{{ day_of_month }}" > {{ day_of_month }} </span> {{ /monthdays }} {{ #events_row }} <div class="jscheduler_ui-daterange-row" style="position: absolute; top: 10px; bottom: 0; left: 0; right: 0; " > {{> events_row }} </div> {{ /events_row }} </div> {{ #grid }} {{> grid }} {{ /grid }} </td> </tr> {{ /months }} </tbody> </table>',t,p)}}function b(e,{styles:t}){this.render=function(n){const s={innerHTML:e.render(n),styles:Object.entries(t).map((([e,t])=>({name:e,value:t})))};return d.render('<div style="display: flex; flex-flow: column; {{# styles }} {{ name }}:{{ value}}; {{/ styles }}" > {{{ innerHTML }}} </div>',s)}}const _=function(){let e=0;return()=>++e}();function D(e,t=0){const n=Math.pow(10,t);return Math.round(e*n)/n}const x=["primary","secondary","success","danger","warning","info","light","dark","white"];class j extends y{get yaxisWidthPercent(){return 15}getCols(){return[]}getAttr(){return{id:"jscheduler_ui-"+_()}}getEvents(){return[]}getColumnTimeRangeType(){return"day"}getDaysOff(){return[]}render(e){const t={...e.vars},n=e.eventsDateRange,s=this.getEvents(e).filter((e=>n.intersects(e))),r=[...t.groups],a=function(e){return t=>t.id==e};for(const e of s.filter((e=>e.values.group_id))){const t=e.values.group_id;r.find(a(t))||r.push({id:t,text:t})}return s.find((e=>!e.values.group_id))&&r.push({id:null,text:""}),t.attr=this.getAttr(),t.xaxis={cols:this.getCols(e)},t.yaxis={style:{width:"15%"},rows:r.map((r=>{const{text:a}=r;return{text:a,events_row:this.withEventsRowPartial({eventDroppableTarget:"#"+t.attr.id,dateRange:n,events:s.filter((e=>(e.values.group_id||null)==r.id)),columnDateRangeType:this.getColumnTimeRangeType(),groupId:r.id,labelType:"showGroups"}),grid:this.withGridPartial({cols:t.xaxis.cols.length}),daysoff:this.getDaysOff(e)}}))},d.render('<table id="{{ attr.id }}" class="jscheduler_ui-timeline" style="width: 100%; table-layout: fixed; flex: 1 1 auto; " data-type-view="{{ attr.data_type_view }}" data-jscheduler_ui-droppable-type="timeline" > <thead> <tr> <td style="width: {{ yaxis.style.width }}" ></td> {{ #xaxis.cols }} <th class = "{{ #disabled }}jscheduler_ui-disabled{{/disabled}}" style = "width: {{ style.width }}; text-align: center; " > {{ text }} {{ #subtext }} <br/> {{ /subtext }} {{ subtext }} </th> {{ /xaxis.cols }} </tr> </thead> <tbody> {{ #yaxis.rows }} <tr> <th data-text="{{ text }}"> {{ text }} {{^text}} <div style="min-height: 25px;"></div> {{/text}} </th> <td colspan="{{ xaxis.cols.length }}" style="position: relative"; > {{ #daysoff }} <div class="jscheduler_ui-dayoff" style = "position: absolute; top: 0; left: {{ style.left }}; width: {{ style.width }}; bottom: 0; " > </div> {{ /daysoff }} {{ #events_row }} <div class="jscheduler_ui-daterange-row" style=" position: absolute; top: 0; bottom: 0; left: 0; right: 0; " > {{> events_row }} </div> {{ /events_row }} {{ #grid }} {{> grid }} {{ /grid }} </td> </tr> {{ /yaxis.rows }} </tbody> </table>',t,p)}}class E extends j{getAttr(){return{...super.getAttr(),data_type_view:"day"}}getEvents({vars:e}){return[[...e.spannedEvents],...e.days.map((e=>e.events))].flat()}getCols(){const e=[];for(let t=0;t<12;t++){const n=r("hh:ii",`1970-01-01 ${2*t}:00`);e.push({text:n})}return e}getColumnTimeRangeType(){return"day_hour"}}class C extends j{getAttr(){return{...super.getAttr(),data_type_view:"week"}}getEvents({vars:e}){return[[...e.spannedEvents],...e.days.map((e=>e.events))].flat()}getCols({vars:e}){return e.days.map((e=>({text:new Date(e.value).toLocaleString("en",{weekday:"short"}),subtext:new Date(e.value).toLocaleString("en",{day:"numeric"}),style:{width:(100-this.yaxisWidthPercent)/7+"%"}})))}getDaysOff({vars:e}){return e.days.map(((e,t)=>{const{date:n}=e.value;return{date:n,style:{width:100/7+"%",left:100*t/7+"%"}}})).filter((e=>[0,6].includes(e.date.getDay())))}}class M extends j{getAttr(){return{...super.getAttr(),data_type_view:"month"}}getEvents({vars:e}){const t=[];for(const n of e.weeks)t.push(...n.events);return t}getDays({vars:e}){const t=[];for(const n of e.weeks)t.push(...n.days);return t}getCols({vars:e}){const t=[];for(const n of this.getDays({vars:e})){const{date:s}=n.value,r=s.toLocaleString("en",{weekday:"short"})[0],a=s.toLocaleString("en",{day:"numeric"}),i=!n.isCurrentMonth,o={width:(100-this.yaxisWidthPercent)/(7*e.weeks.length)+"%"};t.push({text:r,subtext:a,style:o,disabled:i})}return t}getDaysOff({vars:e}){return this.getDays({vars:e}).map(((t,n)=>{const{date:s}=t.value;return{date:s,style:{width:100/(7*e.weeks.length)+"%",left:100*n/(7*e.weeks.length)+"%"}}})).filter((e=>[0,6].includes(e.date.getDay())))}}class R extends j{getAttr(){return{...super.getAttr(),data_type_view:"year"}}getEvents({vars:e}){const t=[];for(const n of e.months)t.push(...n.events);return t}getCols(){const e=[];for(let t=1;t<=12;t++){const n=new Date(`1970-${t}-01`).toLocaleString("en",{month:"short"}),s={width:(100-this.yaxisWidthPercent)/12+"%"};e.push({text:n,style:s})}return e}getColumnTimeRangeType(){return"month"}}e.exports={createViewRenderer:function(e,t){return e instanceof h?new b(t.showGroups?new E(t):new v(t),t):e instanceof c?new b(t.showGroups?new C(t):new v(t),t):e instanceof f?new b(t.showGroups?new M(t):new m(t),t):e instanceof g?new b(t.showGroups?new R(t):new w(t),t):void 0}}},829:(e,t)=>{"use strict";function n(e,t,n,s){switch(e){case 0:return t&n^~t&s;case 1:case 3:return t^n^s;case 2:return t&n^t&s^n&s}}function s(e,t){return e<<t|e>>>32-t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520],a=new Uint8Array(e.length+1);a.set(e),a[e.length]=128;const i=(e=a).length/4+2,o=Math.ceil(i/16),l=new Array(o);for(let t=0;t<o;++t){const n=new Uint32Array(16);for(let s=0;s<16;++s)n[s]=e[64*t+4*s]<<24|e[64*t+4*s+1]<<16|e[64*t+4*s+2]<<8|e[64*t+4*s+3];l[t]=n}l[o-1][14]=8*(e.length-1)/Math.pow(2,32),l[o-1][14]=Math.floor(l[o-1][14]),l[o-1][15]=8*(e.length-1)&4294967295;for(let e=0;e<o;++e){const a=new Uint32Array(80);for(let t=0;t<16;++t)a[t]=l[e][t];for(let e=16;e<80;++e)a[e]=s(a[e-3]^a[e-8]^a[e-14]^a[e-16],1);let i=r[0],o=r[1],u=r[2],d=r[3],h=r[4];for(let e=0;e<80;++e){const r=Math.floor(e/20),l=s(i,5)+n(r,o,u,d)+h+t[r]+a[e]>>>0;h=d,d=u,u=s(o,30)>>>0,o=i,i=l}r[0]=r[0]+i>>>0,r[1]=r[1]+o>>>0,r[2]=r[2]+u>>>0,r[3]=r[3]+d>>>0,r[4]=r[4]+h>>>0}return Uint8Array.of(r[0]>>24,r[0]>>16,r[0]>>8,r[0],r[1]>>24,r[1]>>16,r[1]>>8,r[1],r[2]>>24,r[2]>>16,r[2]>>8,r[2],r[3]>>24,r[3]>>16,r[3]>>8,r[3],r[4]>>24,r[4]>>16,r[4]>>8,r[4])}},903:(e,t,n)=>{const{DateRange:s,DateStringFormatter:r,format_date:a}=n(120);class i{drag(){}move(){}drop(){}startDragAndDrop({mouseEvent:e,observer:t,droppable:n}){if(e.preventDefault(),0!==e.button)return;const s=this;this.drag({mouseEvent:e,droppable:n}),t.onDrag({mouseEvent:e,draggable:s,droppable:n});const r=e=>{this.move({mouseEvent:e,droppable:n}),t.onMove({mouseEvent:e,draggable:s,droppable:n})},a=e=>{this.drop({mouseEvent:e,droppable:n}),t.onDrop({mouseEvent:e,draggable:s,droppable:n}),window.removeEventListener("mousemove",r),window.removeEventListener("mouseup",a)};window.addEventListener("mousemove",r),window.addEventListener("mouseup",a)}}class o extends i{#x;#j;#E;#C;constructor(e,t){super(),this.#x=e,this.#E=t}getCurrentValue(){return this.#j}drag({mouseEvent:e,droppable:t}){this.#j=this.#x,t.getData(e)}move({mouseEvent:e,droppable:t}){const n=t.getData(e);this.#C=n.group_id;const a=new s(n.daterange_start,n.daterange_end);let{percentX:i}=n;i=Math.min(i,100),i=Math.max(i,0);let o=a.start.getTime();o+=a.length*i/100,o=new Date(new r(this.#x.start).with(n.column_daterange_type||"day",o));const l=o.getTime()+this.#x.length;this.#j=this.#j.cloneWith({start:o,end:l})}drop(){const{start:e,end:t}=this.#j,n=this.#x.values,s={...n,start:e,end:t};void 0!==this.#C&&(s.group_id=this.#C),this.#E(s,n)}}class l extends i{#x;#j=null;#E;#M=0;constructor(e,t){super(),this.#x=e,this.#E=t}getCurrentValue(){return this.#j}getCurrentTimestamp({mouseEvent:e,droppable:t}){const{percentY:n,day:r,minhour:a,maxhour:i}=t.getData(e),o=new s(r+" "+a,r+" "+i);return o.start.getTime()+o.length*n/100}drag({mouseEvent:e,droppable:t}){this.#j=this.#x;const n=this.getCurrentTimestamp({mouseEvent:e,droppable:t});this.#M=this.#x.start.getTime()-n}move({mouseEvent:e,droppable:t}){const{day:n,minhour:r,maxhour:a}=t.getData(e),i=new s(n+" "+r,n+" "+a);let o=this.getCurrentTimestamp({mouseEvent:e,droppable:t})+this.#M;o-=o%9e5,o<i.start.getTime()&&(o=i.start.getTime()),o+this.#x.length>i.end.getTime()&&(o=i.end.getTime()-this.#x.length),this.#j=this.#j.cloneWith({start:o,end:o+this.#x.length})}drop(){const{start:e,end:t}=this.#j,n=this.#x.values;this.#E({...n,start:e,end:t},n)}}class u extends i{#x;#E;#j=null;#R=null;constructor(e,t){super(),this.#x=e,this.#E=t}getCurrentValue(){return this.#j}get type(){return"resize_event"}getCurrentTimestamp({mouseEvent:e,droppable:t}){const{percentY:n,day:r,minhour:a,maxhour:i}=t.getData(e),o=new s(r+" "+a,r+" "+i);return o.start.getTime()+o.length*n/100}drag({mouseEvent:e,droppable:t}){const{day:n,minhour:r,maxhour:a}=t.getData(e);this.#R=new s(n+" "+r,n+" "+a),this.#j=this.#x}move({mouseEvent:e,droppable:t}){const{percentY:n,day:r,minhour:a,maxhour:i}=t.getData(e);new s(r+" "+a,r+" "+i);let o=this.getCurrentTimestamp({mouseEvent:e,droppable:t});o-=o%9e5,o>this.#R.end.getTime()&&(o=this.#R.end.getTime()),o<this.#x.start.getTime()&&(o=this.#x.start.getTime()+9e5),this.#j=this.#j.cloneWith({start:this.#j.start,end:o})}drop(){const{start:e,end:t}=this.#j,n=this.#x.values;this.#E({...n,start:e,end:t},n)}}e.exports={createDraggable:function(e,{schedulerEvent:t,onChange:n}){return"move_event_timeline"===e?new o(t,n):"move_event_day"===e?new l(t,n):"resize_event"===e?new u(t,n):void 0}}},965:function(e){e.exports=function(){"use strict";var e=Object.prototype.toString,t=Array.isArray||function(t){return"[object Array]"===e.call(t)};function n(e){return"function"==typeof e}function s(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function r(e,t){return null!=e&&"object"==typeof e&&t in e}var a=RegExp.prototype.test;var i=/\S/;function o(e){return!function(e,t){return a.call(e,t)}(i,e)}var l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};var u=/\s*/,d=/\s+/,h=/\s*=/,c=/\s*\}/,f=/#|\^|\/|>|\{|&|=|!/;function g(e){this.string=e,this.tail=e,this.pos=0}function p(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function y(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}g.prototype.eos=function(){return""===this.tail},g.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},g.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=t.length,t},p.prototype.push=function(e){return new p(e,this)},p.prototype.lookup=function(e){var t,s,a,i=this.cache;if(i.hasOwnProperty(e))t=i[e];else{for(var o,l,u,d=this,h=!1;d;){if(e.indexOf(".")>0)for(o=d.view,l=e.split("."),u=0;null!=o&&u<l.length;)u===l.length-1&&(h=r(o,l[u])||(s=o,a=l[u],null!=s&&"object"!=typeof s&&s.hasOwnProperty&&s.hasOwnProperty(a))),o=o[l[u++]];else o=d.view[e],h=r(d.view,e);if(h){t=o;break}d=d.parent}i[e]=t}return n(t)&&(t=t.call(this.view)),t},y.prototype.clearCache=function(){void 0!==this.templateCache&&this.templateCache.clear()},y.prototype.parse=function(e,n){var r=this.templateCache,a=e+":"+(n||v.tags).join(":"),i=void 0!==r,l=i?r.get(a):void 0;return null==l&&(l=function(e,n){if(!e)return[];var r,a,i,l=!1,p=[],y=[],m=[],w=!1,b=!1,_="",D=0;function x(){if(w&&!b)for(;m.length;)delete y[m.pop()];else m=[];w=!1,b=!1}function j(e){if("string"==typeof e&&(e=e.split(d,2)),!t(e)||2!==e.length)throw new Error("Invalid tags: "+e);r=new RegExp(s(e[0])+"\\s*"),a=new RegExp("\\s*"+s(e[1])),i=new RegExp("\\s*"+s("}"+e[1]))}j(n||v.tags);for(var E,C,M,R,k,T,V=new g(e);!V.eos();){if(E=V.pos,M=V.scanUntil(r))for(var P=0,L=M.length;P<L;++P)o(R=M.charAt(P))?(m.push(y.length),_+=R):(b=!0,l=!0,_+=" "),y.push(["text",R,E,E+1]),E+=1,"\n"===R&&(x(),_="",D=0,l=!1);if(!V.scan(r))break;if(w=!0,C=V.scan(f)||"name",V.scan(u),"="===C?(M=V.scanUntil(h),V.scan(h),V.scanUntil(a)):"{"===C?(M=V.scanUntil(i),V.scan(c),V.scanUntil(a),C="&"):M=V.scanUntil(a),!V.scan(a))throw new Error("Unclosed tag at "+V.pos);if(k=">"==C?[C,M,E,V.pos,_,D,l]:[C,M,E,V.pos],D++,y.push(k),"#"===C||"^"===C)p.push(k);else if("/"===C){if(!(T=p.pop()))throw new Error('Unopened section "'+M+'" at '+E);if(T[1]!==M)throw new Error('Unclosed section "'+T[1]+'" at '+E)}else"name"===C||"{"===C||"&"===C?b=!0:"="===C&&j(M)}if(x(),T=p.pop())throw new Error('Unclosed section "'+T[1]+'" at '+V.pos);return function(e){for(var t,n=[],s=n,r=[],a=0,i=e.length;a<i;++a)switch((t=e[a])[0]){case"#":case"^":s.push(t),r.push(t),s=t[4]=[];break;case"/":r.pop()[5]=t[2],s=r.length>0?r[r.length-1][4]:n;break;default:s.push(t)}return n}(function(e){for(var t,n,s=[],r=0,a=e.length;r<a;++r)(t=e[r])&&("text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(s.push(t),n=t));return s}(y))}(e,n),i&&r.set(a,l)),l},y.prototype.render=function(e,t,n,s){var r=this.getConfigTags(s),a=this.parse(e,r),i=t instanceof p?t:new p(t,void 0);return this.renderTokens(a,i,n,e,s)},y.prototype.renderTokens=function(e,t,n,s,r){for(var a,i,o,l="",u=0,d=e.length;u<d;++u)o=void 0,"#"===(i=(a=e[u])[0])?o=this.renderSection(a,t,n,s,r):"^"===i?o=this.renderInverted(a,t,n,s,r):">"===i?o=this.renderPartial(a,t,n,r):"&"===i?o=this.unescapedValue(a,t):"name"===i?o=this.escapedValue(a,t,r):"text"===i&&(o=this.rawValue(a)),void 0!==o&&(l+=o);return l},y.prototype.renderSection=function(e,s,r,a,i){var o=this,l="",u=s.lookup(e[1]);if(u){if(t(u))for(var d=0,h=u.length;d<h;++d)l+=this.renderTokens(e[4],s.push(u[d]),r,a,i);else if("object"==typeof u||"string"==typeof u||"number"==typeof u)l+=this.renderTokens(e[4],s.push(u),r,a,i);else if(n(u)){if("string"!=typeof a)throw new Error("Cannot use higher-order sections without the original template");null!=(u=u.call(s.view,a.slice(e[3],e[5]),(function(e){return o.render(e,s,r,i)})))&&(l+=u)}else l+=this.renderTokens(e[4],s,r,a,i);return l}},y.prototype.renderInverted=function(e,n,s,r,a){var i=n.lookup(e[1]);if(!i||t(i)&&0===i.length)return this.renderTokens(e[4],n,s,r,a)},y.prototype.indentPartial=function(e,t,n){for(var s=t.replace(/[^ \t]/g,""),r=e.split("\n"),a=0;a<r.length;a++)r[a].length&&(a>0||!n)&&(r[a]=s+r[a]);return r.join("\n")},y.prototype.renderPartial=function(e,t,s,r){if(s){var a=this.getConfigTags(r),i=n(s)?s(e[1]):s[e[1]];if(null!=i){var o=e[6],l=e[5],u=e[4],d=i;0==l&&u&&(d=this.indentPartial(i,u,o));var h=this.parse(d,a);return this.renderTokens(h,t,s,d,r)}}},y.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(null!=n)return n},y.prototype.escapedValue=function(e,t,n){var s=this.getConfigEscape(n)||v.escape,r=t.lookup(e[1]);if(null!=r)return"number"==typeof r&&s===v.escape?String(r):s(r)},y.prototype.rawValue=function(e){return e[1]},y.prototype.getConfigTags=function(e){return t(e)?e:e&&"object"==typeof e?e.tags:void 0},y.prototype.getConfigEscape=function(e){return e&&"object"==typeof e&&!t(e)?e.escape:void 0};var v={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(e){m.templateCache=e},get templateCache(){return m.templateCache}},m=new y;return v.clearCache=function(){return m.clearCache()},v.parse=function(e,t){return m.parse(e,t)},v.render=function(e,n,s,r){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+((t(a=e)?"array":typeof a)+'" was given as the first argument for mustache#render(template, view, partials)'));var a;return m.render(e,n,s,r)},v.escape=function(e){return String(e).replace(/[&<>"'`=\/]/g,(function(e){return l[e]}))},v.Scanner=g,v.Context=p,v.Writer=y,v}()},988:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.URL=t.DNS=t.stringToBytes=void 0;const s=n(797),r=n(11);function a(e){e=unescape(encodeURIComponent(e));const t=new Uint8Array(e.length);for(let n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return t}t.stringToBytes=a,t.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",t.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",t.default=function(e,t,n,i,o,l){const u="string"==typeof n?a(n):n,d="string"==typeof i?(0,s.default)(i):i;if("string"==typeof i&&(i=(0,s.default)(i)),16!==i?.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let h=new Uint8Array(16+u.length);if(h.set(d),h.set(u,d.length),h=t(h),h[6]=15&h[6]|e,h[8]=63&h[8]|128,o){l=l||0;for(let e=0;e<16;++e)o[l+e]=h[e];return o}return(0,r.unsafeStringify)(h)}}},t={},function n(s){var r=t[s];if(void 0!==r)return r.exports;var a=t[s]={exports:{}};return e[s].call(a.exports,a,a.exports,n),a.exports}(466);var e,t}));